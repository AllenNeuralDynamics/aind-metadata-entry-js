function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

import IconButton from "../IconButton";
import React from "react";
import PropTypes from "prop-types";
import * as types from "../../types";
import { ADDITIONAL_PROPERTY_FLAG, isSelect, retrieveSchema, toIdSchema, mergeObjects, deepEquals, getSchemaType, getDisplayLabel } from "../../utils";
var REQUIRED_FIELD_SYMBOL = "*";
var COMPONENT_TYPES = {
  array: "ArrayField",
  "boolean": "BooleanField",
  integer: "NumberField",
  number: "NumberField",
  object: "ObjectField",
  string: "StringField",
  "null": "NullField"
};

function getFieldComponent(schema, uiSchema, idSchema, fields) {
  var field = uiSchema["ui:field"];

  if (typeof field === "function") {
    return field;
  }

  if (typeof field === "string" && field in fields) {
    return fields[field];
  }

  var componentName = COMPONENT_TYPES[getSchemaType(schema)]; // If the type is not defined and the schema uses 'anyOf' or 'oneOf', don't
  // render a field and let the MultiSchemaField component handle the form display

  if (!componentName && (schema.anyOf || schema.oneOf)) {
    return function () {
      return null;
    };
  }

  return componentName in fields ? fields[componentName] : function () {
    var UnsupportedField = fields.UnsupportedField;
    return (
      /*#__PURE__*/
      React.createElement(UnsupportedField, {
        schema: schema,
        idSchema: idSchema,
        reason: "Unknown field type ".concat(schema.type)
      })
    );
  };
}

function Label(props) {
  var label = props.label,
      required = props.required,
      id = props.id;

  if (!label) {
    return null;
  }

  return (
    /*#__PURE__*/
    React.createElement("label", {
      className: "control-label",
      htmlFor: id
    }, label, required &&
    /*#__PURE__*/
    React.createElement("span", {
      className: "required"
    }, REQUIRED_FIELD_SYMBOL))
  );
}

function LabelInput(props) {
  var id = props.id,
      label = props.label,
      onChange = props.onChange;
  return (
    /*#__PURE__*/
    React.createElement("input", {
      className: "form-control",
      type: "text",
      id: id,
      onBlur: function onBlur(event) {
        return onChange(event.target.value);
      },
      defaultValue: label
    })
  );
}

function Help(props) {
  var id = props.id,
      help = props.help;

  if (!help) {
    return null;
  }

  if (typeof help === "string") {
    return (
      /*#__PURE__*/
      React.createElement("p", {
        id: id,
        className: "help-block"
      }, help)
    );
  }

  return (
    /*#__PURE__*/
    React.createElement("div", {
      id: id,
      className: "help-block"
    }, help)
  );
}

function ErrorList(props) {
  var _props$errors = props.errors,
      errors = _props$errors === void 0 ? [] : _props$errors;

  if (errors.length === 0) {
    return null;
  }

  return (
    /*#__PURE__*/
    React.createElement("div", null,
    /*#__PURE__*/
    React.createElement("ul", {
      className: "error-detail bs-callout bs-callout-info"
    }, errors.filter(function (elem) {
      return !!elem;
    }).map(function (error, index) {
      return (
        /*#__PURE__*/
        React.createElement("li", {
          className: "text-danger",
          key: index
        }, error)
      );
    })))
  );
}

function DefaultTemplate(props) {
  var id = props.id,
      label = props.label,
      children = props.children,
      errors = props.errors,
      help = props.help,
      description = props.description,
      hidden = props.hidden,
      required = props.required,
      displayLabel = props.displayLabel;

  if (hidden) {
    return (
      /*#__PURE__*/
      React.createElement("div", {
        className: "hidden"
      }, children)
    );
  }

  return (
    /*#__PURE__*/
    React.createElement(WrapIfAdditional, props, displayLabel &&
    /*#__PURE__*/
    React.createElement(Label, {
      label: label,
      required: required,
      id: id
    }), displayLabel && description ? description : null, children, errors, help)
  );
}

if (process.env.NODE_ENV !== "production") {
  DefaultTemplate.propTypes = {
    id: PropTypes.string,
    classNames: PropTypes.string,
    label: PropTypes.string,
    children: PropTypes.node.isRequired,
    errors: PropTypes.element,
    rawErrors: PropTypes.arrayOf(PropTypes.string),
    help: PropTypes.element,
    rawHelp: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),
    description: PropTypes.element,
    rawDescription: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),
    hidden: PropTypes.bool,
    required: PropTypes.bool,
    readonly: PropTypes.bool,
    displayLabel: PropTypes.bool,
    fields: PropTypes.object,
    formContext: PropTypes.object
  };
}

DefaultTemplate.defaultProps = {
  hidden: false,
  readonly: false,
  required: false,
  displayLabel: true
};

function WrapIfAdditional(props) {
  var id = props.id,
      classNames = props.classNames,
      disabled = props.disabled,
      label = props.label,
      onKeyChange = props.onKeyChange,
      onDropPropertyClick = props.onDropPropertyClick,
      readonly = props.readonly,
      required = props.required,
      schema = props.schema;
  var keyLabel = "".concat(label, " Key"); // i18n ?

  var additional = schema.hasOwnProperty(ADDITIONAL_PROPERTY_FLAG);

  if (!additional) {
    return (
      /*#__PURE__*/
      React.createElement("div", {
        className: classNames
      }, props.children)
    );
  }

  return (
    /*#__PURE__*/
    React.createElement("div", {
      className: classNames
    },
    /*#__PURE__*/
    React.createElement("div", {
      className: "row"
    },
    /*#__PURE__*/
    React.createElement("div", {
      className: "col-xs-5 form-additional"
    },
    /*#__PURE__*/
    React.createElement("div", {
      className: "form-group"
    },
    /*#__PURE__*/
    React.createElement(Label, {
      label: keyLabel,
      required: required,
      id: "".concat(id, "-key")
    }),
    /*#__PURE__*/
    React.createElement(LabelInput, {
      label: label,
      required: required,
      id: "".concat(id, "-key"),
      onChange: onKeyChange
    }))),
    /*#__PURE__*/
    React.createElement("div", {
      className: "form-additional form-group col-xs-5"
    }, props.children),
    /*#__PURE__*/
    React.createElement("div", {
      className: "col-xs-2"
    },
    /*#__PURE__*/
    React.createElement(IconButton, {
      type: "danger",
      icon: "remove",
      className: "array-item-remove btn-block",
      tabIndex: "-1",
      style: {
        border: "0"
      },
      disabled: disabled || readonly,
      onClick: onDropPropertyClick(label)
    }))))
  );
}

function SchemaFieldRender(props) {
  var uiSchema = props.uiSchema,
      formData = props.formData,
      errorSchema = props.errorSchema,
      idPrefix = props.idPrefix,
      idSeparator = props.idSeparator,
      name = props.name,
      onChange = props.onChange,
      onKeyChange = props.onKeyChange,
      onDropPropertyClick = props.onDropPropertyClick,
      required = props.required,
      registry = props.registry,
      _props$wasPropertyKey = props.wasPropertyKeyModified,
      wasPropertyKeyModified = _props$wasPropertyKey === void 0 ? false : _props$wasPropertyKey;
  var rootSchema = registry.rootSchema,
      fields = registry.fields,
      formContext = registry.formContext;
  var FieldTemplate = uiSchema["ui:FieldTemplate"] || registry.FieldTemplate || DefaultTemplate;
  var idSchema = props.idSchema;
  var schema = retrieveSchema(props.schema, rootSchema, formData);
  idSchema = mergeObjects(toIdSchema(schema, null, rootSchema, formData, idPrefix, idSeparator), idSchema);
  var FieldComponent = getFieldComponent(schema, uiSchema, idSchema, fields);
  var DescriptionField = fields.DescriptionField;
  var disabled = Boolean(props.disabled || uiSchema["ui:disabled"]);
  var readonly = Boolean(props.readonly || uiSchema["ui:readonly"] || props.schema.readOnly || schema.readOnly);
  var uiSchemaHideError = uiSchema["ui:hideError"]; // Set hideError to the value provided in the uiSchema, otherwise stick with the prop to propagate to children

  var hideError = uiSchemaHideError === undefined ? props.hideError : Boolean(uiSchemaHideError);
  var autofocus = Boolean(props.autofocus || uiSchema["ui:autofocus"]);

  if (Object.keys(schema).length === 0) {
    return null;
  }

  var displayLabel = getDisplayLabel(schema, uiSchema, rootSchema);

  var __errors = errorSchema.__errors,
      fieldErrorSchema = _objectWithoutProperties(errorSchema, ["__errors"]); // See #439: uiSchema: Don't pass consumed class names to child components


  var field =
  /*#__PURE__*/
  React.createElement(FieldComponent, _extends({}, props, {
    idSchema: idSchema,
    schema: schema,
    uiSchema: _objectSpread({}, uiSchema, {
      classNames: undefined
    }),
    disabled: disabled,
    readonly: readonly,
    hideError: hideError,
    autofocus: autofocus,
    errorSchema: fieldErrorSchema,
    formContext: formContext,
    rawErrors: __errors
  }));
  var id = idSchema.$id; // If this schema has a title defined, but the user has set a new key/label, retain their input.

  var label;

  if (wasPropertyKeyModified) {
    label = name;
  } else {
    label = uiSchema["ui:title"] || props.schema.title || schema.title || name;
  }

  var description = uiSchema["ui:description"] || props.schema.description || schema.description;
  var errors = __errors;
  var help = uiSchema["ui:help"];
  var hidden = uiSchema["ui:widget"] === "hidden";
  var classNames = ["form-group", "field", "field-".concat(schema.type)];

  if (!hideError && errors && errors.length > 0) {
    classNames.push("field-error has-error has-danger");
  }

  classNames.push(uiSchema.classNames);
  classNames = classNames.join(" ").trim();
  var fieldProps = {
    description:
    /*#__PURE__*/
    React.createElement(DescriptionField, {
      id: id + "__description",
      description: description,
      formContext: formContext
    }),
    rawDescription: description,
    help:
    /*#__PURE__*/
    React.createElement(Help, {
      id: id + "__help",
      help: help
    }),
    rawHelp: typeof help === "string" ? help : undefined,
    errors: hideError ? undefined :
    /*#__PURE__*/
    React.createElement(ErrorList, {
      errors: errors
    }),
    rawErrors: hideError ? undefined : errors,
    id: id,
    label: label,
    hidden: hidden,
    onChange: onChange,
    onKeyChange: onKeyChange,
    onDropPropertyClick: onDropPropertyClick,
    required: required,
    disabled: disabled,
    readonly: readonly,
    hideError: hideError,
    displayLabel: displayLabel,
    classNames: classNames,
    formContext: formContext,
    formData: formData,
    fields: fields,
    schema: schema,
    uiSchema: uiSchema,
    registry: registry
  };
  var _AnyOfField = registry.fields.AnyOfField;
  var _OneOfField = registry.fields.OneOfField;
  return (
    /*#__PURE__*/
    React.createElement(FieldTemplate, fieldProps,
    /*#__PURE__*/
    React.createElement(React.Fragment, null, field, schema.anyOf && !isSelect(schema) &&
    /*#__PURE__*/
    React.createElement(_AnyOfField, {
      disabled: disabled,
      readonly: readonly,
      hideError: hideError,
      errorSchema: errorSchema,
      formData: formData,
      idPrefix: idPrefix,
      idSchema: idSchema,
      idSeparator: idSeparator,
      onBlur: props.onBlur,
      onChange: props.onChange,
      onFocus: props.onFocus,
      options: schema.anyOf.map(function (_schema) {
        return retrieveSchema(_schema, rootSchema, formData);
      }),
      baseType: schema.type,
      registry: registry,
      schema: schema,
      uiSchema: uiSchema
    }), schema.oneOf && !isSelect(schema) &&
    /*#__PURE__*/
    React.createElement(_OneOfField, {
      disabled: disabled,
      readonly: readonly,
      hideError: hideError,
      errorSchema: errorSchema,
      formData: formData,
      idPrefix: idPrefix,
      idSchema: idSchema,
      idSeparator: idSeparator,
      onBlur: props.onBlur,
      onChange: props.onChange,
      onFocus: props.onFocus,
      options: schema.oneOf.map(function (_schema) {
        return retrieveSchema(_schema, rootSchema, formData);
      }),
      baseType: schema.type,
      registry: registry,
      schema: schema,
      uiSchema: uiSchema
    })))
  );
}

var SchemaField =
/*#__PURE__*/
function (_React$Component) {
  _inherits(SchemaField, _React$Component);

  function SchemaField() {
    _classCallCheck(this, SchemaField);

    return _possibleConstructorReturn(this, _getPrototypeOf(SchemaField).apply(this, arguments));
  }

  _createClass(SchemaField, [{
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps, nextState) {
      return !deepEquals(this.props, nextProps);
    }
  }, {
    key: "render",
    value: function render() {
      return SchemaFieldRender(this.props);
    }
  }]);

  return SchemaField;
}(React.Component);

SchemaField.defaultProps = {
  uiSchema: {},
  errorSchema: {},
  idSchema: {},
  disabled: false,
  readonly: false,
  autofocus: false,
  hideError: false
};

if (process.env.NODE_ENV !== "production") {
  SchemaField.propTypes = {
    schema: PropTypes.object.isRequired,
    uiSchema: PropTypes.object,
    idSchema: PropTypes.object,
    formData: PropTypes.any,
    errorSchema: PropTypes.object,
    registry: types.registry.isRequired
  };
}

export default SchemaField;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2ZpZWxkcy9TY2hlbWFGaWVsZC5qcyJdLCJuYW1lcyI6WyJJY29uQnV0dG9uIiwiUmVhY3QiLCJQcm9wVHlwZXMiLCJ0eXBlcyIsIkFERElUSU9OQUxfUFJPUEVSVFlfRkxBRyIsImlzU2VsZWN0IiwicmV0cmlldmVTY2hlbWEiLCJ0b0lkU2NoZW1hIiwibWVyZ2VPYmplY3RzIiwiZGVlcEVxdWFscyIsImdldFNjaGVtYVR5cGUiLCJnZXREaXNwbGF5TGFiZWwiLCJSRVFVSVJFRF9GSUVMRF9TWU1CT0wiLCJDT01QT05FTlRfVFlQRVMiLCJhcnJheSIsImludGVnZXIiLCJudW1iZXIiLCJvYmplY3QiLCJzdHJpbmciLCJnZXRGaWVsZENvbXBvbmVudCIsInNjaGVtYSIsInVpU2NoZW1hIiwiaWRTY2hlbWEiLCJmaWVsZHMiLCJmaWVsZCIsImNvbXBvbmVudE5hbWUiLCJhbnlPZiIsIm9uZU9mIiwiVW5zdXBwb3J0ZWRGaWVsZCIsInR5cGUiLCJMYWJlbCIsInByb3BzIiwibGFiZWwiLCJyZXF1aXJlZCIsImlkIiwiTGFiZWxJbnB1dCIsIm9uQ2hhbmdlIiwiZXZlbnQiLCJ0YXJnZXQiLCJ2YWx1ZSIsIkhlbHAiLCJoZWxwIiwiRXJyb3JMaXN0IiwiZXJyb3JzIiwibGVuZ3RoIiwiZmlsdGVyIiwiZWxlbSIsIm1hcCIsImVycm9yIiwiaW5kZXgiLCJEZWZhdWx0VGVtcGxhdGUiLCJjaGlsZHJlbiIsImRlc2NyaXB0aW9uIiwiaGlkZGVuIiwiZGlzcGxheUxhYmVsIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicHJvcFR5cGVzIiwiY2xhc3NOYW1lcyIsIm5vZGUiLCJpc1JlcXVpcmVkIiwiZWxlbWVudCIsInJhd0Vycm9ycyIsImFycmF5T2YiLCJyYXdIZWxwIiwib25lT2ZUeXBlIiwicmF3RGVzY3JpcHRpb24iLCJib29sIiwicmVhZG9ubHkiLCJmb3JtQ29udGV4dCIsImRlZmF1bHRQcm9wcyIsIldyYXBJZkFkZGl0aW9uYWwiLCJkaXNhYmxlZCIsIm9uS2V5Q2hhbmdlIiwib25Ecm9wUHJvcGVydHlDbGljayIsImtleUxhYmVsIiwiYWRkaXRpb25hbCIsImhhc093blByb3BlcnR5IiwiYm9yZGVyIiwiU2NoZW1hRmllbGRSZW5kZXIiLCJmb3JtRGF0YSIsImVycm9yU2NoZW1hIiwiaWRQcmVmaXgiLCJpZFNlcGFyYXRvciIsIm5hbWUiLCJyZWdpc3RyeSIsIndhc1Byb3BlcnR5S2V5TW9kaWZpZWQiLCJyb290U2NoZW1hIiwiRmllbGRUZW1wbGF0ZSIsIkZpZWxkQ29tcG9uZW50IiwiRGVzY3JpcHRpb25GaWVsZCIsIkJvb2xlYW4iLCJyZWFkT25seSIsInVpU2NoZW1hSGlkZUVycm9yIiwiaGlkZUVycm9yIiwidW5kZWZpbmVkIiwiYXV0b2ZvY3VzIiwiT2JqZWN0Iiwia2V5cyIsIl9fZXJyb3JzIiwiZmllbGRFcnJvclNjaGVtYSIsIiRpZCIsInRpdGxlIiwicHVzaCIsImpvaW4iLCJ0cmltIiwiZmllbGRQcm9wcyIsIl9BbnlPZkZpZWxkIiwiQW55T2ZGaWVsZCIsIl9PbmVPZkZpZWxkIiwiT25lT2ZGaWVsZCIsIm9uQmx1ciIsIm9uRm9jdXMiLCJfc2NoZW1hIiwiU2NoZW1hRmllbGQiLCJuZXh0UHJvcHMiLCJuZXh0U3RhdGUiLCJDb21wb25lbnQiLCJhbnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPQSxVQUFQLE1BQXVCLGVBQXZCO0FBQ0EsT0FBT0MsS0FBUCxNQUFrQixPQUFsQjtBQUNBLE9BQU9DLFNBQVAsTUFBc0IsWUFBdEI7QUFDQSxPQUFPLEtBQUtDLEtBQVosTUFBdUIsYUFBdkI7QUFFQSxTQUNFQyx3QkFERixFQUVFQyxRQUZGLEVBR0VDLGNBSEYsRUFJRUMsVUFKRixFQUtFQyxZQUxGLEVBTUVDLFVBTkYsRUFPRUMsYUFQRixFQVFFQyxlQVJGLFFBU08sYUFUUDtBQVdBLElBQU1DLHFCQUFxQixHQUFHLEdBQTlCO0FBQ0EsSUFB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Ozs7MENBQ2tCQyxTLEVBQVdDLFMsRUFBVztBQUMxQyxhQUFPLENBQUM1RyxVQUFVLENBQUMsS0FBS3NCLEtBQU4sRUFBYXFGLFNBQWIsQ0FBbEI7QUFDRDs7OzZCQUVRO0FBQ1AsYUFBT3BDLGlCQUFpQixDQUFDLEtBQUtqRCxLQUFOLENBQXhCO0FBQ0Q7Ozs7RUFQdUI5QixLQUFLLENBQUNxSCxTOztBQVVoQ0gsV0FBVyxDQUFDNUMsWUFBWixHQUEyQjtBQUN6QmxELEVBQUFBLFFBQVEsRUFBRSxFQURlO0FBRXpCNkQsRUFBQUEsV0FBVyxFQUFFLEVBRlk7QUFHekI1RCxFQUFBQSxRQUFRLEVBQUUsRUFIZTtBQUl6Qm1ELEVBQUFBLFFBQVEsRUFBRSxLQUplO0FBS3pCSixFQUFBQSxRQUFRLEVBQUUsS0FMZTtBQU16QjRCLEVBQUFBLFNBQVMsRUFBRSxLQU5jO0FBT3pCRixFQUFBQSxTQUFTLEVBQUU7QUFQYyxDQUEzQjs7QUFVQSxJQUFJeEMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsWUFBN0IsRUFBMkM7QUFDekMwRCxFQUFBQSxXQUFXLENBQUN6RCxTQUFaLEdBQXdCO0FBQ3RCdEMsSUFBQUEsTUFBTSxFQUFFbEIsU0FBUyxDQUFDZSxNQUFWLENBQWlCNEMsVUFESDtBQUV0QnhDLElBQUFBLFFBQVEsRUFBRW5CLFNBQVMsQ0FBQ2UsTUFGRTtBQUd0QkssSUFBQUEsUUFBUSxFQUFFcEIsU0FBUyxDQUFDZSxNQUhFO0FBSXRCZ0UsSUFBQUEsUUFBUSxFQUFFL0UsU0FBUyxDQUFDcUgsR0FKRTtBQUt0QnJDLElBQUFBLFdBQVcsRUFBRWhGLFNBQVMsQ0FBQ2UsTUFMRDtBQU10QnFFLElBQUFBLFFBQVEsRUFBRW5GLEtBQUssQ0FBQ21GLFFBQU4sQ0FBZXpCO0FBTkgsR0FBeEI7QUFRRDs7QUFFRCxlQUFlc0QsV0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBJY29uQnV0dG9uIGZyb20gXCIuLi9JY29uQnV0dG9uXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XG5pbXBvcnQgKiBhcyB0eXBlcyBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuaW1wb3J0IHtcbiAgQURESVRJT05BTF9QUk9QRVJUWV9GTEFHLFxuICBpc1NlbGVjdCxcbiAgcmV0cmlldmVTY2hlbWEsXG4gIHRvSWRTY2hlbWEsXG4gIG1lcmdlT2JqZWN0cyxcbiAgZGVlcEVxdWFscyxcbiAgZ2V0U2NoZW1hVHlwZSxcbiAgZ2V0RGlzcGxheUxhYmVsLFxufSBmcm9tIFwiLi4vLi4vdXRpbHNcIjtcblxuY29uc3QgUkVRVUlSRURfRklFTERfU1lNQk9MID0gXCIqXCI7XG5jb25zdCBDT01QT05FTlRfVFlQRVMgPSB7XG4gIGFycmF5OiBcIkFycmF5RmllbGRcIixcbiAgYm9vbGVhbjogXCJCb29sZWFuRmllbGRcIixcbiAgaW50ZWdlcjogXCJOdW1iZXJGaWVsZFwiLFxuICBudW1iZXI6IFwiTnVtYmVyRmllbGRcIixcbiAgb2JqZWN0OiBcIk9iamVjdEZpZWxkXCIsXG4gIHN0cmluZzogXCJTdHJpbmdGaWVsZFwiLFxuICBudWxsOiBcIk51bGxGaWVsZFwiLFxufTtcblxuZnVuY3Rpb24gZ2V0RmllbGRDb21wb25lbnQoc2NoZW1hLCB1aVNjaGVtYSwgaWRTY2hlbWEsIGZpZWxkcykge1xuICBjb25zdCBmaWVsZCA9IHVpU2NoZW1hW1widWk6ZmllbGRcIl07XG4gIGlmICh0eXBlb2YgZmllbGQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBmaWVsZDtcbiAgfVxuICBpZiAodHlwZW9mIGZpZWxkID09PSBcInN0cmluZ1wiICYmIGZpZWxkIGluIGZpZWxkcykge1xuICAgIHJldHVybiBmaWVsZHNbZmllbGRdO1xuICB9XG5cbiAgY29uc3QgY29tcG9uZW50TmFtZSA9IENPTVBPTkVOVF9UWVBFU1tnZXRTY2hlbWFUeXBlKHNjaGVtYSldO1xuXG4gIC8vIElmIHRoZSB0eXBlIGlzIG5vdCBkZWZpbmVkIGFuZCB0aGUgc2NoZW1hIHVzZXMgJ2FueU9mJyBvciAnb25lT2YnLCBkb24ndFxuICAvLyByZW5kZXIgYSBmaWVsZCBhbmQgbGV0IHRoZSBNdWx0aVNjaGVtYUZpZWxkIGNvbXBvbmVudCBoYW5kbGUgdGhlIGZvcm0gZGlzcGxheVxuICBpZiAoIWNvbXBvbmVudE5hbWUgJiYgKHNjaGVtYS5hbnlPZiB8fCBzY2hlbWEub25lT2YpKSB7XG4gICAgcmV0dXJuICgpID0+IG51bGw7XG4gIH1cblxuICByZXR1cm4gY29tcG9uZW50TmFtZSBpbiBmaWVsZHNcbiAgICA/IGZpZWxkc1tjb21wb25lbnROYW1lXVxuICAgIDogKCkgPT4ge1xuICAgICAgICBjb25zdCB7IFVuc3VwcG9ydGVkRmllbGQgfSA9IGZpZWxkcztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxVbnN1cHBvcnRlZEZpZWxkXG4gICAgICAgICAgICBzY2hlbWE9e3NjaGVtYX1cbiAgICAgICAgICAgIGlkU2NoZW1hPXtpZFNjaGVtYX1cbiAgICAgICAgICAgIHJlYXNvbj17YFVua25vd24gZmllbGQgdHlwZSAke3NjaGVtYS50eXBlfWB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICAgIH07XG59XG5cbmZ1bmN0aW9uIExhYmVsKHByb3BzKSB7XG4gIGNvbnN0IHsgbGFiZWwsIHJlcXVpcmVkLCBpZCB9ID0gcHJvcHM7XG4gIGlmICghbGFiZWwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gKFxuICAgIDxsYWJlbCBjbGFzc05hbWU9XCJjb250cm9sLWxhYmVsXCIgaHRtbEZvcj17aWR9PlxuICAgICAge2xhYmVsfVxuICAgICAge3JlcXVpcmVkICYmIDxzcGFuIGNsYXNzTmFtZT1cInJlcXVpcmVkXCI+e1JFUVVJUkVEX0ZJRUxEX1NZTUJPTH08L3NwYW4+fVxuICAgIDwvbGFiZWw+XG4gICk7XG59XG5cbmZ1bmN0aW9uIExhYmVsSW5wdXQocHJvcHMpIHtcbiAgY29uc3QgeyBpZCwgbGFiZWwsIG9uQ2hhbmdlIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8aW5wdXRcbiAgICAgIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiXG4gICAgICB0eXBlPVwidGV4dFwiXG4gICAgICBpZD17aWR9XG4gICAgICBvbkJsdXI9e2V2ZW50ID0+IG9uQ2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSl9XG4gICAgICBkZWZhdWx0VmFsdWU9e2xhYmVsfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIEhlbHAocHJvcHMpIHtcbiAgY29uc3QgeyBpZCwgaGVscCB9ID0gcHJvcHM7XG4gIGlmICghaGVscCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmICh0eXBlb2YgaGVscCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiAoXG4gICAgICA8cCBpZD17aWR9IGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAge2hlbHB9XG4gICAgICA8L3A+XG4gICAgKTtcbiAgfVxuICByZXR1cm4gKFxuICAgIDxkaXYgaWQ9e2lkfSBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICB7aGVscH1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gRXJyb3JMaXN0KHByb3BzKSB7XG4gIGNvbnN0IHsgZXJyb3JzID0gW10gfSA9IHByb3BzO1xuICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPHVsIGNsYXNzTmFtZT1cImVycm9yLWRldGFpbCBicy1jYWxsb3V0IGJzLWNhbGxvdXQtaW5mb1wiPlxuICAgICAgICB7ZXJyb3JzXG4gICAgICAgICAgLmZpbHRlcihlbGVtID0+ICEhZWxlbSlcbiAgICAgICAgICAubWFwKChlcnJvciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJ0ZXh0LWRhbmdlclwiIGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgIHtlcnJvcn1cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICA8L3VsPlxuICAgIDwvZGl2PlxuICApO1xufVxuZnVuY3Rpb24gRGVmYXVsdFRlbXBsYXRlKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBjaGlsZHJlbixcbiAgICBlcnJvcnMsXG4gICAgaGVscCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBoaWRkZW4sXG4gICAgcmVxdWlyZWQsXG4gICAgZGlzcGxheUxhYmVsLFxuICB9ID0gcHJvcHM7XG4gIGlmIChoaWRkZW4pIHtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJoaWRkZW5cIj57Y2hpbGRyZW59PC9kaXY+O1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8V3JhcElmQWRkaXRpb25hbCB7Li4ucHJvcHN9PlxuICAgICAge2Rpc3BsYXlMYWJlbCAmJiA8TGFiZWwgbGFiZWw9e2xhYmVsfSByZXF1aXJlZD17cmVxdWlyZWR9IGlkPXtpZH0gLz59XG4gICAgICB7ZGlzcGxheUxhYmVsICYmIGRlc2NyaXB0aW9uID8gZGVzY3JpcHRpb24gOiBudWxsfVxuICAgICAge2NoaWxkcmVufVxuICAgICAge2Vycm9yc31cbiAgICAgIHtoZWxwfVxuICAgIDwvV3JhcElmQWRkaXRpb25hbD5cbiAgKTtcbn1cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgRGVmYXVsdFRlbXBsYXRlLnByb3BUeXBlcyA9IHtcbiAgICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjbGFzc05hbWVzOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZS5pc1JlcXVpcmVkLFxuICAgIGVycm9yczogUHJvcFR5cGVzLmVsZW1lbnQsXG4gICAgcmF3RXJyb3JzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgICBoZWxwOiBQcm9wVHlwZXMuZWxlbWVudCxcbiAgICByYXdIZWxwOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuZWxlbWVudF0pLFxuICAgIGRlc2NyaXB0aW9uOiBQcm9wVHlwZXMuZWxlbWVudCxcbiAgICByYXdEZXNjcmlwdGlvbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLmVsZW1lbnRdKSxcbiAgICBoaWRkZW46IFByb3BUeXBlcy5ib29sLFxuICAgIHJlcXVpcmVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICByZWFkb25seTogUHJvcFR5cGVzLmJvb2wsXG4gICAgZGlzcGxheUxhYmVsOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBmaWVsZHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgZm9ybUNvbnRleHQ6IFByb3BUeXBlcy5vYmplY3QsXG4gIH07XG59XG5cbkRlZmF1bHRUZW1wbGF0ZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGhpZGRlbjogZmFsc2UsXG4gIHJlYWRvbmx5OiBmYWxzZSxcbiAgcmVxdWlyZWQ6IGZhbHNlLFxuICBkaXNwbGF5TGFiZWw6IHRydWUsXG59O1xuXG5mdW5jdGlvbiBXcmFwSWZBZGRpdGlvbmFsKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBjbGFzc05hbWVzLFxuICAgIGRpc2FibGVkLFxuICAgIGxhYmVsLFxuICAgIG9uS2V5Q2hhbmdlLFxuICAgIG9uRHJvcFByb3BlcnR5Q2xpY2ssXG4gICAgcmVhZG9ubHksXG4gICAgcmVxdWlyZWQsXG4gICAgc2NoZW1hLFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGtleUxhYmVsID0gYCR7bGFiZWx9IEtleWA7IC8vIGkxOG4gP1xuICBjb25zdCBhZGRpdGlvbmFsID0gc2NoZW1hLmhhc093blByb3BlcnR5KEFERElUSU9OQUxfUFJPUEVSVFlfRkxBRyk7XG5cbiAgaWYgKCFhZGRpdGlvbmFsKSB7XG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzfT57cHJvcHMuY2hpbGRyZW59PC9kaXY+O1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lc30+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14cy01IGZvcm0tYWRkaXRpb25hbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPExhYmVsIGxhYmVsPXtrZXlMYWJlbH0gcmVxdWlyZWQ9e3JlcXVpcmVkfSBpZD17YCR7aWR9LWtleWB9IC8+XG4gICAgICAgICAgICA8TGFiZWxJbnB1dFxuICAgICAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZH1cbiAgICAgICAgICAgICAgaWQ9e2Ake2lkfS1rZXlgfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17b25LZXlDaGFuZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWFkZGl0aW9uYWwgZm9ybS1ncm91cCBjb2wteHMtNVwiPlxuICAgICAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLTJcIj5cbiAgICAgICAgICA8SWNvbkJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImRhbmdlclwiXG4gICAgICAgICAgICBpY29uPVwicmVtb3ZlXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImFycmF5LWl0ZW0tcmVtb3ZlIGJ0bi1ibG9ja1wiXG4gICAgICAgICAgICB0YWJJbmRleD1cIi0xXCJcbiAgICAgICAgICAgIHN0eWxlPXt7IGJvcmRlcjogXCIwXCIgfX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZCB8fCByZWFkb25seX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e29uRHJvcFByb3BlcnR5Q2xpY2sobGFiZWwpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFNjaGVtYUZpZWxkUmVuZGVyKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICB1aVNjaGVtYSxcbiAgICBmb3JtRGF0YSxcbiAgICBlcnJvclNjaGVtYSxcbiAgICBpZFByZWZpeCxcbiAgICBpZFNlcGFyYXRvcixcbiAgICBuYW1lLFxuICAgIG9uQ2hhbmdlLFxuICAgIG9uS2V5Q2hhbmdlLFxuICAgIG9uRHJvcFByb3BlcnR5Q2xpY2ssXG4gICAgcmVxdWlyZWQsXG4gICAgcmVnaXN0cnksXG4gICAgd2FzUHJvcGVydHlLZXlNb2RpZmllZCA9IGZhbHNlLFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHsgcm9vdFNjaGVtYSwgZmllbGRzLCBmb3JtQ29udGV4dCB9ID0gcmVnaXN0cnk7XG4gIGNvbnN0IEZpZWxkVGVtcGxhdGUgPVxuICAgIHVpU2NoZW1hW1widWk6RmllbGRUZW1wbGF0ZVwiXSB8fCByZWdpc3RyeS5GaWVsZFRlbXBsYXRlIHx8IERlZmF1bHRUZW1wbGF0ZTtcbiAgbGV0IGlkU2NoZW1hID0gcHJvcHMuaWRTY2hlbWE7XG4gIGNvbnN0IHNjaGVtYSA9IHJldHJpZXZlU2NoZW1hKHByb3BzLnNjaGVtYSwgcm9vdFNjaGVtYSwgZm9ybURhdGEpO1xuICBpZFNjaGVtYSA9IG1lcmdlT2JqZWN0cyhcbiAgICB0b0lkU2NoZW1hKHNjaGVtYSwgbnVsbCwgcm9vdFNjaGVtYSwgZm9ybURhdGEsIGlkUHJlZml4LCBpZFNlcGFyYXRvciksXG4gICAgaWRTY2hlbWFcbiAgKTtcbiAgY29uc3QgRmllbGRDb21wb25lbnQgPSBnZXRGaWVsZENvbXBvbmVudChzY2hlbWEsIHVpU2NoZW1hLCBpZFNjaGVtYSwgZmllbGRzKTtcbiAgY29uc3QgeyBEZXNjcmlwdGlvbkZpZWxkIH0gPSBmaWVsZHM7XG4gIGNvbnN0IGRpc2FibGVkID0gQm9vbGVhbihwcm9wcy5kaXNhYmxlZCB8fCB1aVNjaGVtYVtcInVpOmRpc2FibGVkXCJdKTtcbiAgY29uc3QgcmVhZG9ubHkgPSBCb29sZWFuKFxuICAgIHByb3BzLnJlYWRvbmx5IHx8XG4gICAgICB1aVNjaGVtYVtcInVpOnJlYWRvbmx5XCJdIHx8XG4gICAgICBwcm9wcy5zY2hlbWEucmVhZE9ubHkgfHxcbiAgICAgIHNjaGVtYS5yZWFkT25seVxuICApO1xuICBjb25zdCB1aVNjaGVtYUhpZGVFcnJvciA9IHVpU2NoZW1hW1widWk6aGlkZUVycm9yXCJdO1xuICAvLyBTZXQgaGlkZUVycm9yIHRvIHRoZSB2YWx1ZSBwcm92aWRlZCBpbiB0aGUgdWlTY2hlbWEsIG90aGVyd2lzZSBzdGljayB3aXRoIHRoZSBwcm9wIHRvIHByb3BhZ2F0ZSB0byBjaGlsZHJlblxuICBjb25zdCBoaWRlRXJyb3IgPVxuICAgIHVpU2NoZW1hSGlkZUVycm9yID09PSB1bmRlZmluZWRcbiAgICAgID8gcHJvcHMuaGlkZUVycm9yXG4gICAgICA6IEJvb2xlYW4odWlTY2hlbWFIaWRlRXJyb3IpO1xuICBjb25zdCBhdXRvZm9jdXMgPSBCb29sZWFuKHByb3BzLmF1dG9mb2N1cyB8fCB1aVNjaGVtYVtcInVpOmF1dG9mb2N1c1wiXSk7XG4gIGlmIChPYmplY3Qua2V5cyhzY2hlbWEpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzcGxheUxhYmVsID0gZ2V0RGlzcGxheUxhYmVsKHNjaGVtYSwgdWlTY2hlbWEsIHJvb3RTY2hlbWEpO1xuXG4gIGNvbnN0IHsgX19lcnJvcnMsIC4uLmZpZWxkRXJyb3JTY2hlbWEgfSA9IGVycm9yU2NoZW1hO1xuXG4gIC8vIFNlZSAjNDM5OiB1aVNjaGVtYTogRG9uJ3QgcGFzcyBjb25zdW1lZCBjbGFzcyBuYW1lcyB0byBjaGlsZCBjb21wb25lbnRzXG4gIGNvbnN0IGZpZWxkID0gKFxuICAgIDxGaWVsZENvbXBvbmVudFxuICAgICAgey4uLnByb3BzfVxuICAgICAgaWRTY2hlbWE9e2lkU2NoZW1hfVxuICAgICAgc2NoZW1hPXtzY2hlbWF9XG4gICAgICB1aVNjaGVtYT17eyAuLi51aVNjaGVtYSwgY2xhc3NOYW1lczogdW5kZWZpbmVkIH19XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICByZWFkb25seT17cmVhZG9ubHl9XG4gICAgICBoaWRlRXJyb3I9e2hpZGVFcnJvcn1cbiAgICAgIGF1dG9mb2N1cz17YXV0b2ZvY3VzfVxuICAgICAgZXJyb3JTY2hlbWE9e2ZpZWxkRXJyb3JTY2hlbWF9XG4gICAgICBmb3JtQ29udGV4dD17Zm9ybUNvbnRleHR9XG4gICAgICByYXdFcnJvcnM9e19fZXJyb3JzfVxuICAgIC8+XG4gICk7XG5cbiAgY29uc3QgaWQgPSBpZFNjaGVtYS4kaWQ7XG5cbiAgLy8gSWYgdGhpcyBzY2hlbWEgaGFzIGEgdGl0bGUgZGVmaW5lZCwgYnV0IHRoZSB1c2VyIGhhcyBzZXQgYSBuZXcga2V5L2xhYmVsLCByZXRhaW4gdGhlaXIgaW5wdXQuXG4gIGxldCBsYWJlbDtcbiAgaWYgKHdhc1Byb3BlcnR5S2V5TW9kaWZpZWQpIHtcbiAgICBsYWJlbCA9IG5hbWU7XG4gIH0gZWxzZSB7XG4gICAgbGFiZWwgPSB1aVNjaGVtYVtcInVpOnRpdGxlXCJdIHx8IHByb3BzLnNjaGVtYS50aXRsZSB8fCBzY2hlbWEudGl0bGUgfHwgbmFtZTtcbiAgfVxuXG4gIGNvbnN0IGRlc2NyaXB0aW9uID1cbiAgICB1aVNjaGVtYVtcInVpOmRlc2NyaXB0aW9uXCJdIHx8XG4gICAgcHJvcHMuc2NoZW1hLmRlc2NyaXB0aW9uIHx8XG4gICAgc2NoZW1hLmRlc2NyaXB0aW9uO1xuICBjb25zdCBlcnJvcnMgPSBfX2Vycm9ycztcbiAgY29uc3QgaGVscCA9IHVpU2NoZW1hW1widWk6aGVscFwiXTtcbiAgY29uc3QgaGlkZGVuID0gdWlTY2hlbWFbXCJ1aTp3aWRnZXRcIl0gPT09IFwiaGlkZGVuXCI7XG5cbiAgbGV0IGNsYXNzTmFtZXMgPSBbXCJmb3JtLWdyb3VwXCIsIFwiZmllbGRcIiwgYGZpZWxkLSR7c2NoZW1hLnR5cGV9YF07XG4gIGlmICghaGlkZUVycm9yICYmIGVycm9ycyAmJiBlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgIGNsYXNzTmFtZXMucHVzaChcImZpZWxkLWVycm9yIGhhcy1lcnJvciBoYXMtZGFuZ2VyXCIpO1xuICB9XG4gIGNsYXNzTmFtZXMucHVzaCh1aVNjaGVtYS5jbGFzc05hbWVzKTtcbiAgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXMuam9pbihcIiBcIikudHJpbSgpO1xuXG4gIGNvbnN0IGZpZWxkUHJvcHMgPSB7XG4gICAgZGVzY3JpcHRpb246IChcbiAgICAgIDxEZXNjcmlwdGlvbkZpZWxkXG4gICAgICAgIGlkPXtpZCArIFwiX19kZXNjcmlwdGlvblwifVxuICAgICAgICBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259XG4gICAgICAgIGZvcm1Db250ZXh0PXtmb3JtQ29udGV4dH1cbiAgICAgIC8+XG4gICAgKSxcbiAgICByYXdEZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgaGVscDogPEhlbHAgaWQ9e2lkICsgXCJfX2hlbHBcIn0gaGVscD17aGVscH0gLz4sXG4gICAgcmF3SGVscDogdHlwZW9mIGhlbHAgPT09IFwic3RyaW5nXCIgPyBoZWxwIDogdW5kZWZpbmVkLFxuICAgIGVycm9yczogaGlkZUVycm9yID8gdW5kZWZpbmVkIDogPEVycm9yTGlzdCBlcnJvcnM9e2Vycm9yc30gLz4sXG4gICAgcmF3RXJyb3JzOiBoaWRlRXJyb3IgPyB1bmRlZmluZWQgOiBlcnJvcnMsXG4gICAgaWQsXG4gICAgbGFiZWwsXG4gICAgaGlkZGVuLFxuICAgIG9uQ2hhbmdlLFxuICAgIG9uS2V5Q2hhbmdlLFxuICAgIG9uRHJvcFByb3BlcnR5Q2xpY2ssXG4gICAgcmVxdWlyZWQsXG4gICAgZGlzYWJsZWQsXG4gICAgcmVhZG9ubHksXG4gICAgaGlkZUVycm9yLFxuICAgIGRpc3BsYXlMYWJlbCxcbiAgICBjbGFzc05hbWVzLFxuICAgIGZvcm1Db250ZXh0LFxuICAgIGZvcm1EYXRhLFxuICAgIGZpZWxkcyxcbiAgICBzY2hlbWEsXG4gICAgdWlTY2hlbWEsXG4gICAgcmVnaXN0cnksXG4gIH07XG5cbiAgY29uc3QgX0FueU9mRmllbGQgPSByZWdpc3RyeS5maWVsZHMuQW55T2ZGaWVsZDtcbiAgY29uc3QgX09uZU9mRmllbGQgPSByZWdpc3RyeS5maWVsZHMuT25lT2ZGaWVsZDtcblxuICByZXR1cm4gKFxuICAgIDxGaWVsZFRlbXBsYXRlIHsuLi5maWVsZFByb3BzfT5cbiAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAge2ZpZWxkfVxuXG4gICAgICAgIHsvKlxuICAgICAgICBJZiB0aGUgc2NoZW1hIGBhbnlPZmAgb3IgJ29uZU9mJyBjYW4gYmUgcmVuZGVyZWQgYXMgYSBzZWxlY3QgY29udHJvbCwgZG9uJ3RcbiAgICAgICAgcmVuZGVyIHRoZSBzZWxlY3Rpb24gYW5kIGxldCBgU3RyaW5nRmllbGRgIGNvbXBvbmVudCBoYW5kbGVcbiAgICAgICAgcmVuZGVyaW5nXG4gICAgICAqL31cbiAgICAgICAge3NjaGVtYS5hbnlPZiAmJiAhaXNTZWxlY3Qoc2NoZW1hKSAmJiAoXG4gICAgICAgICAgPF9BbnlPZkZpZWxkXG4gICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICByZWFkb25seT17cmVhZG9ubHl9XG4gICAgICAgICAgICBoaWRlRXJyb3I9e2hpZGVFcnJvcn1cbiAgICAgICAgICAgIGVycm9yU2NoZW1hPXtlcnJvclNjaGVtYX1cbiAgICAgICAgICAgIGZvcm1EYXRhPXtmb3JtRGF0YX1cbiAgICAgICAgICAgIGlkUHJlZml4PXtpZFByZWZpeH1cbiAgICAgICAgICAgIGlkU2NoZW1hPXtpZFNjaGVtYX1cbiAgICAgICAgICAgIGlkU2VwYXJhdG9yPXtpZFNlcGFyYXRvcn1cbiAgICAgICAgICAgIG9uQmx1cj17cHJvcHMub25CbHVyfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3Byb3BzLm9uQ2hhbmdlfVxuICAgICAgICAgICAgb25Gb2N1cz17cHJvcHMub25Gb2N1c31cbiAgICAgICAgICAgIG9wdGlvbnM9e3NjaGVtYS5hbnlPZi5tYXAoX3NjaGVtYSA9PlxuICAgICAgICAgICAgICByZXRyaWV2ZVNjaGVtYShfc2NoZW1hLCByb290U2NoZW1hLCBmb3JtRGF0YSlcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBiYXNlVHlwZT17c2NoZW1hLnR5cGV9XG4gICAgICAgICAgICByZWdpc3RyeT17cmVnaXN0cnl9XG4gICAgICAgICAgICBzY2hlbWE9e3NjaGVtYX1cbiAgICAgICAgICAgIHVpU2NoZW1hPXt1aVNjaGVtYX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuXG4gICAgICAgIHtzY2hlbWEub25lT2YgJiYgIWlzU2VsZWN0KHNjaGVtYSkgJiYgKFxuICAgICAgICAgIDxfT25lT2ZGaWVsZFxuICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgcmVhZG9ubHk9e3JlYWRvbmx5fVxuICAgICAgICAgICAgaGlkZUVycm9yPXtoaWRlRXJyb3J9XG4gICAgICAgICAgICBlcnJvclNjaGVtYT17ZXJyb3JTY2hlbWF9XG4gICAgICAgICAgICBmb3JtRGF0YT17Zm9ybURhdGF9XG4gICAgICAgICAgICBpZFByZWZpeD17aWRQcmVmaXh9XG4gICAgICAgICAgICBpZFNjaGVtYT17aWRTY2hlbWF9XG4gICAgICAgICAgICBpZFNlcGFyYXRvcj17aWRTZXBhcmF0b3J9XG4gICAgICAgICAgICBvbkJsdXI9e3Byb3BzLm9uQmx1cn1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtwcm9wcy5vbkNoYW5nZX1cbiAgICAgICAgICAgIG9uRm9jdXM9e3Byb3BzLm9uRm9jdXN9XG4gICAgICAgICAgICBvcHRpb25zPXtzY2hlbWEub25lT2YubWFwKF9zY2hlbWEgPT5cbiAgICAgICAgICAgICAgcmV0cmlldmVTY2hlbWEoX3NjaGVtYSwgcm9vdFNjaGVtYSwgZm9ybURhdGEpXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgYmFzZVR5cGU9e3NjaGVtYS50eXBlfVxuICAgICAgICAgICAgcmVnaXN0cnk9e3JlZ2lzdHJ5fVxuICAgICAgICAgICAgc2NoZW1hPXtzY2hlbWF9XG4gICAgICAgICAgICB1aVNjaGVtYT17dWlTY2hlbWF9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgPC9GaWVsZFRlbXBsYXRlPlxuICApO1xufVxuXG5jbGFzcyBTY2hlbWFGaWVsZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgIHJldHVybiAhZGVlcEVxdWFscyh0aGlzLnByb3BzLCBuZXh0UHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBTY2hlbWFGaWVsZFJlbmRlcih0aGlzLnByb3BzKTtcbiAgfVxufVxuXG5TY2hlbWFGaWVsZC5kZWZhdWx0UHJvcHMgPSB7XG4gIHVpU2NoZW1hOiB7fSxcbiAgZXJyb3JTY2hlbWE6IHt9LFxuICBpZFNjaGVtYToge30sXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgcmVhZG9ubHk6IGZhbHNlLFxuICBhdXRvZm9jdXM6IGZhbHNlLFxuICBoaWRlRXJyb3I6IGZhbHNlLFxufTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICBTY2hlbWFGaWVsZC5wcm9wVHlwZXMgPSB7XG4gICAgc2NoZW1hOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgdWlTY2hlbWE6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgaWRTY2hlbWE6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgZm9ybURhdGE6IFByb3BUeXBlcy5hbnksXG4gICAgZXJyb3JTY2hlbWE6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgcmVnaXN0cnk6IHR5cGVzLnJlZ2lzdHJ5LmlzUmVxdWlyZWQsXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNjaGVtYUZpZWxkO1xuIl19