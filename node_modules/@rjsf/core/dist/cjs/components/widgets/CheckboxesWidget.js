"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function selectValue(value, selected, all) {
  var at = all.indexOf(value);
  var updated = selected.slice(0, at).concat(value, selected.slice(at)); // As inserting values at predefined index positions doesn't work with empty
  // arrays, we need to reorder the updated selection to match the initial order

  return updated.sort(function (a, b) {
    return all.indexOf(a) > all.indexOf(b);
  });
}

function deselectValue(value, selected) {
  return selected.filter(function (v) {
    return v !== value;
  });
}

function CheckboxesWidget(props) {
  var id = props.id,
      disabled = props.disabled,
      options = props.options,
      value = props.value,
      autofocus = props.autofocus,
      readonly = props.readonly,
      _onChange = props.onChange;
  var enumOptions = options.enumOptions,
      enumDisabled = options.enumDisabled,
      inline = options.inline;
  return (
    /*#__PURE__*/
    _react["default"].createElement("div", {
      className: "checkboxes",
      id: id
    }, enumOptions.map(function (option, index) {
      var checked = value.indexOf(option.value) !== -1;
      var itemDisabled = enumDisabled && enumDisabled.indexOf(option.value) != -1;
      var disabledCls = disabled || itemDisabled || readonly ? "disabled" : "";

      var checkbox =
      /*#__PURE__*/
      _react["default"].createElement("span", null,
      /*#__PURE__*/
      _react["default"].createElement("input", {
        type: "checkbox",
        id: "".concat(id, "_").concat(index),
        checked: checked,
        disabled: disabled || itemDisabled || readonly,
        autoFocus: autofocus && index === 0,
        onChange: function onChange(event) {
          var all = enumOptions.map(function (_ref) {
            var value = _ref.value;
            return value;
          });

          if (event.target.checked) {
            _onChange(selectValue(option.value, value, all));
          } else {
            _onChange(deselectValue(option.value, value));
          }
        }
      }),
      /*#__PURE__*/
      _react["default"].createElement("span", null, option.label));

      return inline ?
      /*#__PURE__*/
      _react["default"].createElement("label", {
        key: index,
        className: "checkbox-inline ".concat(disabledCls)
      }, checkbox) :
      /*#__PURE__*/
      _react["default"].createElement("div", {
        key: index,
        className: "checkbox ".concat(disabledCls)
      },
      /*#__PURE__*/
      _react["default"].createElement("label", null, checkbox));
    }))
  );
}

CheckboxesWidget.defaultProps = {
  autofocus: false,
  options: {
    inline: false
  }
};

if (process.env.NODE_ENV !== "production") {
  CheckboxesWidget.propTypes = {
    schema: _propTypes["default"].object.isRequired,
    id: _propTypes["default"].string.isRequired,
    options: _propTypes["default"].shape({
      enumOptions: _propTypes["default"].array,
      inline: _propTypes["default"].bool
    }).isRequired,
    value: _propTypes["default"].any,
    required: _propTypes["default"].bool,
    readonly: _propTypes["default"].bool,
    disabled: _propTypes["default"].bool,
    multiple: _propTypes["default"].bool,
    autofocus: _propTypes["default"].bool,
    onChange: _propTypes["default"].func
  };
}

var _default = CheckboxesWidget;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3dpZGdldHMvQ2hlY2tib3hlc1dpZGdldC5qcyJdLCJuYW1lcyI6WyJzZWxlY3RWYWx1ZSIsInZhbHVlIiwic2VsZWN0ZWQiLCJhbGwiLCJhdCIsImluZGV4T2YiLCJ1cGRhdGVkIiwic2xpY2UiLCJjb25jYXQiLCJzb3J0IiwiYSIsImIiLCJkZXNlbGVjdFZhbHVlIiwiZmlsdGVyIiwidiIsIkNoZWNrYm94ZXNXaWRnZXQiLCJwcm9wcyIsImlkIiwiZGlzYWJsZWQiLCJvcHRpb25zIiwiYXV0b2ZvY3VzIiwicmVhZG9ubHkiLCJvbkNoYW5nZSIsImVudW1PcHRpb25zIiwiZW51bURpc2FibGVkIiwiaW5saW5lIiwibWFwIiwib3B0aW9uIiwiaW5kZXgiLCJjaGVja2VkIiwiaXRlbURpc2FibGVkIiwiZGlzYWJsZWRDbHMiLCJjaGVja2JveCIsImV2ZW50IiwidGFyZ2V0IiwibGFiZWwiLCJkZWZhdWx0UHJvcHMiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJwcm9wVHlwZXMiLCJzY2hlbWEiLCJQcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwic3RyaW5nIiwic2hhcGUiLCJhcnJheSIsImJvb2wiLCJhbnkiLCJyZXF1aXJlZCIsIm11bHRpcGxlIiwiZnVuYyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsU0FBU0EsV0FBVCxDQUFxQkMsS0FBckIsRUFBNEJDLFFBQTVCLEVBQXNDQyxHQUF0QyxFQUEyQztBQUN6QyxNQUFNQyxFQUFFLEdBQUdELEdBQUcsQ0FBQ0UsT0FBSixDQUFZSixLQUFaLENBQVg7QUFDQSxNQUFNSyxPQUFPLEdBQUdKLFFBQVEsQ0FBQ0ssS0FBVCxDQUFlLENBQWYsRUFBa0JILEVBQWxCLEVBQXNCSSxNQUF0QixDQUE2QlAsS0FBN0IsRUFBb0NDLFFBQVEsQ0FBQ0ssS0FBVCxDQUFlSCxFQUFmLENBQXBDLENBQWhCLENBRnlDLENBR3pDO0FB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QUFVTSxJQVpNO0FBYTNCMUIsSUFBQUEsUUFBUSxFQUFFb0Isc0JBQVVVO0FBYk8sR0FBN0I7QUFlRDs7ZUFFY3JDLGdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xuXG5mdW5jdGlvbiBzZWxlY3RWYWx1ZSh2YWx1ZSwgc2VsZWN0ZWQsIGFsbCkge1xuICBjb25zdCBhdCA9IGFsbC5pbmRleE9mKHZhbHVlKTtcbiAgY29uc3QgdXBkYXRlZCA9IHNlbGVjdGVkLnNsaWNlKDAsIGF0KS5jb25jYXQodmFsdWUsIHNlbGVjdGVkLnNsaWNlKGF0KSk7XG4gIC8vIEFzIGluc2VydGluZyB2YWx1ZXMgYXQgcHJlZGVmaW5lZCBpbmRleCBwb3NpdGlvbnMgZG9lc24ndCB3b3JrIHdpdGggZW1wdHlcbiAgLy8gYXJyYXlzLCB3ZSBuZWVkIHRvIHJlb3JkZXIgdGhlIHVwZGF0ZWQgc2VsZWN0aW9uIHRvIG1hdGNoIHRoZSBpbml0aWFsIG9yZGVyXG4gIHJldHVybiB1cGRhdGVkLnNvcnQoKGEsIGIpID0+IGFsbC5pbmRleE9mKGEpID4gYWxsLmluZGV4T2YoYikpO1xufVxuXG5mdW5jdGlvbiBkZXNlbGVjdFZhbHVlKHZhbHVlLCBzZWxlY3RlZCkge1xuICByZXR1cm4gc2VsZWN0ZWQuZmlsdGVyKHYgPT4gdiAhPT0gdmFsdWUpO1xufVxuXG5mdW5jdGlvbiBDaGVja2JveGVzV2lkZ2V0KHByb3BzKSB7XG4gIGNvbnN0IHsgaWQsIGRpc2FibGVkLCBvcHRpb25zLCB2YWx1ZSwgYXV0b2ZvY3VzLCByZWFkb25seSwgb25DaGFuZ2UgfSA9IHByb3BzO1xuICBjb25zdCB7IGVudW1PcHRpb25zLCBlbnVtRGlzYWJsZWQsIGlubGluZSB9ID0gb3B0aW9ucztcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWNrYm94ZXNcIiBpZD17aWR9PlxuICAgICAge2VudW1PcHRpb25zLm1hcCgob3B0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2VkID0gdmFsdWUuaW5kZXhPZihvcHRpb24udmFsdWUpICE9PSAtMTtcbiAgICAgICAgY29uc3QgaXRlbURpc2FibGVkID1cbiAgICAgICAgICBlbnVtRGlzYWJsZWQgJiYgZW51bURpc2FibGVkLmluZGV4T2Yob3B0aW9uLnZhbHVlKSAhPSAtMTtcbiAgICAgICAgY29uc3QgZGlzYWJsZWRDbHMgPVxuICAgICAgICAgIGRpc2FibGVkIHx8IGl0ZW1EaXNhYmxlZCB8fCByZWFkb25seSA/IFwiZGlzYWJsZWRcIiA6IFwiXCI7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gKFxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgIGlkPXtgJHtpZH1fJHtpbmRleH1gfVxuICAgICAgICAgICAgICBjaGVja2VkPXtjaGVja2VkfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWQgfHwgaXRlbURpc2FibGVkIHx8IHJlYWRvbmx5fVxuICAgICAgICAgICAgICBhdXRvRm9jdXM9e2F1dG9mb2N1cyAmJiBpbmRleCA9PT0gMH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGwgPSBlbnVtT3B0aW9ucy5tYXAoKHsgdmFsdWUgfSkgPT4gdmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgb25DaGFuZ2Uoc2VsZWN0VmFsdWUob3B0aW9uLnZhbHVlLCB2YWx1ZSwgYWxsKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGRlc2VsZWN0VmFsdWUob3B0aW9uLnZhbHVlLCB2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8c3Bhbj57b3B0aW9uLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBpbmxpbmUgPyAoXG4gICAgICAgICAgPGxhYmVsIGtleT17aW5kZXh9IGNsYXNzTmFtZT17YGNoZWNrYm94LWlubGluZSAke2Rpc2FibGVkQ2xzfWB9PlxuICAgICAgICAgICAge2NoZWNrYm94fVxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9e2BjaGVja2JveCAke2Rpc2FibGVkQ2xzfWB9PlxuICAgICAgICAgICAgPGxhYmVsPntjaGVja2JveH08L2xhYmVsPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfSl9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbkNoZWNrYm94ZXNXaWRnZXQuZGVmYXVsdFByb3BzID0ge1xuICBhdXRvZm9jdXM6IGZhbHNlLFxuICBvcHRpb25zOiB7XG4gICAgaW5saW5lOiBmYWxzZSxcbiAgfSxcbn07XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgQ2hlY2tib3hlc1dpZGdldC5wcm9wVHlwZXMgPSB7XG4gICAgc2NoZW1hOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBvcHRpb25zOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgZW51bU9wdGlvbnM6IFByb3BUeXBlcy5hcnJheSxcbiAgICAgIGlubGluZTogUHJvcFR5cGVzLmJvb2wsXG4gICAgfSkuaXNSZXF1aXJlZCxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLmFueSxcbiAgICByZXF1aXJlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgcmVhZG9ubHk6IFByb3BUeXBlcy5ib29sLFxuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBtdWx0aXBsZTogUHJvcFR5cGVzLmJvb2wsXG4gICAgYXV0b2ZvY3VzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IENoZWNrYm94ZXNXaWRnZXQ7XG4iXX0=