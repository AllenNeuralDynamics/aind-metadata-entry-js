{
   "title": "OphysRig",
   "description": "Description of an optical physiology rig",
   "type": "object",
   "properties": {
      "describedBy": {
         "title": "Describedby",
         "default": "https://raw.githubusercontent.com/AllenNeuralDynamics/aind-data-schema/main/src/aind_data_schema/ophys/ophys_rig.py",
         "const": "https://raw.githubusercontent.com/AllenNeuralDynamics/aind-data-schema/main/src/aind_data_schema/ophys/ophys_rig.py",
         "type": "string"
      },
      "schema_version": {
         "title": "Schema Version",
         "description": "schema version",
         "default": "0.2.0",
         "const": "0.2.0",
         "type": "string"
      },
      "rig_id": {
         "title": "Rig ID",
         "description": "room number_stim apparatus_version",
         "type": "string"
      },
      "rig_location": {
         "title": "Rig location",
         "type": "string"
      },
      "temperature_control": {
         "title": "Temperature control",
         "type": "boolean"
      },
      "humidity_control": {
         "title": "Humidity control",
         "type": "boolean"
      },
      "vibration_control": {
         "title": "Vibration control",
         "type": "boolean"
      },
      "patch_cords": {
         "title": "Patch cords",
         "uniqueItems": true,
         "type": "array",
         "items": {
            "$ref": "#/definitions/Patch"
         }
      },
      "cameras": {
         "title": "Cameras",
         "uniqueItems": true,
         "type": "array",
         "items": {
            "$ref": "#/definitions/Camera"
         }
      },
      "lasers": {
         "title": "Lasers",
         "uniqueItems": true,
         "type": "array",
         "items": {
            "$ref": "#/definitions/Laser"
         }
      },
      "detectors": {
         "title": "Detectors",
         "uniqueItems": true,
         "type": "array",
         "items": {
            "$ref": "#/definitions/Detector"
         }
      },
      "filters": {
         "title": "Filters",
         "uniqueItems": true,
         "type": "array",
         "items": {
            "$ref": "#/definitions/Filter"
         }
      },
      "lenses": {
         "title": "Lenses",
         "uniqueItems": true,
         "type": "array",
         "items": {
            "$ref": "#/definitions/Lens"
         }
      },
      "additional_devices": {
         "title": "Additional devices",
         "uniqueItems": true,
         "type": "array",
         "items": {
            "$ref": "#/definitions/Device"
         }
      },
      "light_path_diagram": {
         "title": "Light path diagram",
         "description": "Path to diagram of the light path.",
         "type": "string"
      },
      "notes": {
         "title": "Notes",
         "type": "string"
      }
   },
   "required": [
      "rig_id",
      "patch_cords",
      "lasers"
   ],
   "additionalProperties": false,
   "definitions": {
      "Manufacturer": {
         "title": "Manufacturer",
         "description": "Device manufacturer name",
         "enum": [
            "Thorlabs",
            "Optotune",
            "Cambridge Technology",
            "Nikon",
            "Edmund Optics",
            "Ealing",
            "Hamamatsu",
            "Olympus",
            "Leica",
            "LifeCanvas",
            "Custom",
            "Chroma",
            "Semrock",
            "Neuropixels",
            "MPI",
            "Vortran",
            "Coherent Scientific",
            "MKS Newport",
            "Applied Scientific Instrumentation",
            "IR Robot Co",
            "Vieworks",
            "Oxxius",
            "National Instruments",
            "Other"
         ]
      },
      "DaqChannelType": {
         "title": "DaqChannelType",
         "description": "DAQ Channel type",
         "enum": [
            "Digital Output",
            "Analog Output"
         ]
      },
      "DaqChannel": {
         "title": "DaqChannel",
         "description": "Description of a DAQ Channel",
         "type": "object",
         "properties": {
            "index": {
               "title": "index",
               "type": "integer"
            },
            "type": {
               "title": "DAQ channel type",
               "allOf": [
                  {
                     "$ref": "#/definitions/DaqChannelType"
                  }
               ]
            }
         },
         "required": [
            "index",
            "type"
         ],
         "additionalProperties": false
      },
      "PatchName": {
         "title": "PatchName",
         "description": "Patch name",
         "enum": [
            "Patch Cord A",
            "Patch Cord B",
            "Patch Cord C"
         ]
      },
      "Patch": {
         "title": "Patch",
         "description": "Description of a patch",
         "type": "object",
         "properties": {
            "manufacturer": {
               "title": "Manufacturer",
               "allOf": [
                  {
                     "$ref": "#/definitions/Manufacturer"
                  }
               ]
            },
            "serial_number": {
               "title": "Serial number",
               "type": "string"
            },
            "model": {
               "title": "Model",
               "type": "string"
            },
            "notes": {
               "title": "Notes",
               "type": "string"
            },
            "daq_channel": {
               "title": "DAQ channel",
               "allOf": [
                  {
                     "$ref": "#/definitions/DaqChannel"
                  }
               ]
            },
            "name": {
               "title": "Patch Name",
               "allOf": [
                  {
                     "$ref": "#/definitions/PatchName"
                  }
               ]
            },
            "core_diameter": {
               "title": "Core diameter (um)",
               "type": "number"
            },
            "numerical_aperture": {
               "title": "Numerical aperture",
               "type": "number"
            },
            "photobleaching_date": {
               "title": "Photobleaching date",
               "type": "string",
               "format": "date"
            }
         },
         "required": [
            "manufacturer",
            "serial_number",
            "name",
            "core_diameter",
            "numerical_aperture"
         ],
         "additionalProperties": false
      },
      "CameraName": {
         "title": "CameraName",
         "description": "Camera name",
         "enum": [
            "Body Camera",
            "Eye Camera",
            "Face Camera"
         ]
      },
      "Camera": {
         "title": "Camera",
         "description": "Description of an ophys camera",
         "type": "object",
         "properties": {
            "manufacturer": {
               "title": "Manufacturer",
               "allOf": [
                  {
                     "$ref": "#/definitions/Manufacturer"
                  }
               ]
            },
            "serial_number": {
               "title": "Serial number",
               "type": "string"
            },
            "model": {
               "title": "Model",
               "type": "string"
            },
            "notes": {
               "title": "Notes",
               "type": "string"
            },
            "daq_channel": {
               "title": "DAQ channel",
               "allOf": [
                  {
                     "$ref": "#/definitions/DaqChannel"
                  }
               ]
            },
            "name": {
               "title": "Camera Name",
               "allOf": [
                  {
                     "$ref": "#/definitions/CameraName"
                  }
               ]
            },
            "position_x": {
               "title": "Position X",
               "type": "number"
            },
            "position_y": {
               "title": "Position Y",
               "type": "number"
            },
            "position_z": {
               "title": "Position Z",
               "type": "number"
            },
            "angle_pitch": {
               "title": "Angle pitch (deg)",
               "type": "number"
            },
            "angle_yaw": {
               "title": "Angle yaw (deg)",
               "type": "number"
            },
            "angle_roll": {
               "title": "Angle roll (deg)",
               "type": "number"
            },
            "recording_software": {
               "title": "Recording software",
               "type": "string"
            },
            "recording_software_version": {
               "title": "Recording software version",
               "type": "string"
            }
         },
         "required": [
            "manufacturer",
            "serial_number",
            "name",
            "position_x",
            "position_y",
            "position_z",
            "angle_pitch",
            "angle_yaw",
            "angle_roll"
         ],
         "additionalProperties": false
      },
      "LaserName": {
         "title": "LaserName",
         "description": "Laser name",
         "enum": [
            "Laser A",
            "Laser B",
            "Laser C",
            "Laser D",
            "Laser E"
         ]
      },
      "Coupling": {
         "title": "Coupling",
         "description": "Coupling type name",
         "enum": [
            "Free-space",
            "SMF",
            "MMF",
            "other"
         ]
      },
      "Laser": {
         "title": "Laser",
         "description": "Description of a laser",
         "type": "object",
         "properties": {
            "manufacturer": {
               "title": "Manufacturer",
               "allOf": [
                  {
                     "$ref": "#/definitions/Manufacturer"
                  }
               ]
            },
            "serial_number": {
               "title": "Serial number",
               "type": "string"
            },
            "model": {
               "title": "Model",
               "type": "string"
            },
            "notes": {
               "title": "Notes",
               "type": "string"
            },
            "daq_channel": {
               "title": "DAQ channel",
               "allOf": [
                  {
                     "$ref": "#/definitions/DaqChannel"
                  }
               ]
            },
            "name": {
               "title": "Laser Name",
               "allOf": [
                  {
                     "$ref": "#/definitions/LaserName"
                  }
               ]
            },
            "item_number": {
               "title": "Item number",
               "type": "string"
            },
            "wavelength": {
               "title": "Wavelength (nm)",
               "type": "integer"
            },
            "maximum_power": {
               "title": "Maximum power (mW)",
               "type": "number"
            },
            "coupling": {
               "title": "Coupling",
               "allOf": [
                  {
                     "$ref": "#/definitions/Coupling"
                  }
               ]
            },
            "coupling_efficiency": {
               "title": "Coupling efficiency (percent)",
               "type": "number"
            },
            "calibration_data": {
               "title": "Calibration data",
               "description": "path to calibration data",
               "type": "string"
            },
            "calibration_date": {
               "title": "Calibration date",
               "type": "string",
               "format": "date-time"
            }
         },
         "required": [
            "manufacturer",
            "serial_number",
            "name",
            "wavelength",
            "maximum_power"
         ],
         "additionalProperties": false
      },
      "CameraType": {
         "title": "CameraType",
         "description": "Camera type name",
         "enum": [
            "Camera",
            "PMT",
            "other"
         ]
      },
      "DataInterface": {
         "title": "DataInterface",
         "description": "Data interface name",
         "enum": [
            "USB",
            "CameraLink",
            "Coax",
            "other"
         ]
      },
      "Cooling": {
         "title": "Cooling",
         "description": "Cooling medium name",
         "enum": [
            "air",
            "water"
         ]
      },
      "Immersion": {
         "title": "Immersion",
         "description": "Immersion medium name",
         "enum": [
            "air",
            "water",
            "oil"
         ]
      },
      "Detector": {
         "title": "Detector",
         "description": "Description of a generic detector",
         "type": "object",
         "properties": {
            "manufacturer": {
               "title": "Manufacturer",
               "allOf": [
                  {
                     "$ref": "#/definitions/Manufacturer"
                  }
               ]
            },
            "serial_number": {
               "title": "Serial number",
               "type": "string"
            },
            "model": {
               "title": "Model",
               "type": "string"
            },
            "notes": {
               "title": "Notes",
               "type": "string"
            },
            "daq_channel": {
               "title": "DAQ channel",
               "allOf": [
                  {
                     "$ref": "#/definitions/DaqChannel"
                  }
               ]
            },
            "name": {
               "title": "Name",
               "description": "Brief name to identify detector to match with session information",
               "type": "string"
            },
            "type": {
               "title": "Camera Type",
               "allOf": [
                  {
                     "$ref": "#/definitions/CameraType"
                  }
               ]
            },
            "data_interface": {
               "title": "Data interface",
               "allOf": [
                  {
                     "$ref": "#/definitions/DataInterface"
                  }
               ]
            },
            "cooling": {
               "title": "Cooling",
               "allOf": [
                  {
                     "$ref": "#/definitions/Cooling"
                  }
               ]
            },
            "immersion": {
               "title": "Immersion",
               "allOf": [
                  {
                     "$ref": "#/definitions/Immersion"
                  }
               ]
            }
         },
         "required": [
            "manufacturer",
            "serial_number",
            "type",
            "data_interface",
            "cooling"
         ],
         "additionalProperties": false
      },
      "FilterType": {
         "title": "FilterType",
         "description": "Filter type name",
         "enum": [
            "Long pass",
            "Band pass"
         ]
      },
      "FilterSize": {
         "title": "FilterSize",
         "description": "Filter size value",
         "enum": [
            25,
            32
         ]
      },
      "Filter": {
         "title": "Filter",
         "description": "Description of a filter",
         "type": "object",
         "properties": {
            "manufacturer": {
               "title": "Manufacturer",
               "allOf": [
                  {
                     "$ref": "#/definitions/Manufacturer"
                  }
               ]
            },
            "serial_number": {
               "title": "Serial number",
               "type": "string"
            },
            "model": {
               "title": "Model",
               "type": "string"
            },
            "notes": {
               "title": "Notes",
               "type": "string"
            },
            "daq_channel": {
               "title": "DAQ channel",
               "allOf": [
                  {
                     "$ref": "#/definitions/DaqChannel"
                  }
               ]
            },
            "type": {
               "title": "Filter Type",
               "allOf": [
                  {
                     "$ref": "#/definitions/FilterType"
                  }
               ]
            },
            "size": {
               "title": "Size (mm)",
               "allOf": [
                  {
                     "$ref": "#/definitions/FilterSize"
                  }
               ]
            },
            "cut_off_frequency": {
               "title": "Cut off frequency",
               "type": "integer"
            },
            "cut_on_frequency": {
               "title": "Cut on frequency",
               "type": "integer"
            },
            "description": {
               "title": "Description",
               "description": "Where/how filter is being used",
               "type": "string"
            }
         },
         "required": [
            "manufacturer",
            "serial_number",
            "type"
         ],
         "additionalProperties": false
      },
      "LensSize": {
         "title": "LensSize",
         "description": "Lens size value",
         "enum": [
            1,
            2
         ]
      },
      "Lens": {
         "title": "Lens",
         "description": "Description of a lens",
         "type": "object",
         "properties": {
            "manufacturer": {
               "title": "Manufacturer",
               "allOf": [
                  {
                     "$ref": "#/definitions/Manufacturer"
                  }
               ]
            },
            "serial_number": {
               "title": "Serial number",
               "type": "string"
            },
            "model": {
               "title": "Model",
               "type": "string"
            },
            "notes": {
               "title": "Notes",
               "type": "string"
            },
            "daq_channel": {
               "title": "DAQ channel",
               "allOf": [
                  {
                     "$ref": "#/definitions/DaqChannel"
                  }
               ]
            },
            "focal_length": {
               "title": "Focal length (mm)",
               "type": "number"
            },
            "size": {
               "title": "Size (inches)",
               "allOf": [
                  {
                     "$ref": "#/definitions/LensSize"
                  }
               ]
            },
            "optimized_wavelength_range": {
               "title": "Optimized wavelength range (nm)",
               "type": "string"
            }
         },
         "required": [
            "manufacturer",
            "serial_number"
         ],
         "additionalProperties": false
      },
      "Device": {
         "title": "Device",
         "description": "Description of a device that communicates with a DAQ",
         "type": "object",
         "properties": {
            "manufacturer": {
               "title": "Manufacturer",
               "allOf": [
                  {
                     "$ref": "#/definitions/Manufacturer"
                  }
               ]
            },
            "serial_number": {
               "title": "Serial number",
               "type": "string"
            },
            "model": {
               "title": "Model",
               "type": "string"
            },
            "notes": {
               "title": "Notes",
               "type": "string"
            },
            "daq_channel": {
               "title": "DAQ channel",
               "allOf": [
                  {
                     "$ref": "#/definitions/DaqChannel"
                  }
               ]
            }
         },
         "required": [
            "manufacturer",
            "serial_number"
         ],
         "additionalProperties": false
      }
   }
}